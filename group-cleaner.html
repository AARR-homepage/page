<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Discordグループ：名前・アイコン変更＆退出ツール</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #0f0f0f;
            color: #fff;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: flex-start;
            align-items: flex-start;
            flex-direction: column;
        }
        form {
            display: flex;
            flex-direction: column;
            max-width: 800px;
        }
        label {
            margin-top: 10px;
            color: #fff;
        }
        input, textarea {
            width: 120%;
            max-width: 800px;
            margin-top: 5px;
            padding: 10px;
            font-size: 16px;
            background-color: #333;
            border: 1px solid #ccc;
            border-radius: 0;
            color: white;
            outline: none;
        }
        textarea {
            height: 100px;
        }
        button {
            cursor: pointer;
            background-color: #333333;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 0px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        button:hover {
            background-color: #45a049;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        button:active {
            background-color: #2e8b57;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            transform: scale(0.98);
        }
        body, h1, p, label, a, button {
            color: white;
        }
        #logbox {
            width: 60%;
            min-height: 30px;
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #333;
            color: white;
            overflow-y: scroll;
            white-space: pre-wrap;
            font-family: "Consolas", "Menlo", monospace;
        }
        .log-normal {
            color: #fff;
        }
        .log-error {
            color: #ff6b6b;
        }
    </style>
</head>
<body>
    <h2>グループ名退出ツール</h2>
    <form onsubmit="event.preventDefault();startProcess();">
        <label for="token">Discord トークン:</label>
        <input type="text" id="token" placeholder="あなたのDiscordトークンを入力">
<br>
        <label for="groupId">グループID（自動取得/編集可・改行区切り）:</label>
        <textarea id="groupId" placeholder="グループIDごとに改行"></textarea>
<br>
⚠️退出したグループIDは自動削除
<br>
        <button type="button" id="fetchGroupsBtn" onclick="checkGuildAndFetchGroups()">グループID自動取得</button>
<br>
        <button type="submit" id="processBtn" onclick="event.preventDefault();checkGuildAndStartProcess();">グループ名/アイコン変更・退出</button>
<br>
⚠️使用するにはAARRに参加している必要があります
<br>
    </form>
    <div id="logbox"></div>
    <script>

/***************************************************************************/
const MAX_LOGS=100;let logEntries=[];function pushLog(_0x7C43,_0x7BE7= false){logEntries.unshift({message,isError});if(logEntries.length> MAX_LOGS){logEntries.length= MAX_LOGS};renderLogs()}function renderLogs(){document.getElementById("\x6C\x6F\x67\x62\x6F\x78").innerHTML= logEntries.map((_0x7DB3)=>{return ("\x3C\x64\x69\x76\x20\x63\x6C\x61\x73\x73\x3D\x22"+(_0x7DB3.isError?"\x6C\x6F\x67\x2D\x65\x72\x72\x6F\x72":"\x6C\x6F\x67\x2D\x6E\x6F\x72\x6D\x61\x6C")+"\x22\x3E"+_0x7DB3.message+"\x3C\x2F\x64\x69\x76\x3E")}).join('')}function clearLogs(){logEntries= [];renderLogs()}function saveInputs(){localStorage.setItem('\x64\x69\x73\x63\x6F\x72\x64\x5F\x74\x6F\x6B\x65\x6E',document.getElementById('\x74\x6F\x6B\x65\x6E').value);localStorage.setItem('\x67\x72\x6F\x75\x70\x5F\x69\x64\x73',document.getElementById('\x67\x72\x6F\x75\x70\x49\x64').value)}function loadInputs(){const _0x7907=localStorage.getItem('\x64\x69\x73\x63\x6F\x72\x64\x5F\x74\x6F\x6B\x65\x6E');if(_0x7907){document.getElementById('\x74\x6F\x6B\x65\x6E').value= _0x7907};const _0x77F3=localStorage.getItem('\x67\x72\x6F\x75\x70\x5F\x69\x64\x73');if(_0x77F3){document.getElementById('\x67\x72\x6F\x75\x70\x49\x64').value= _0x77F3}}window.addEventListener('\x44\x4F\x4D\x43\x6F\x6E\x74\x65\x6E\x74\x4C\x6F\x61\x64\x65\x64',loadInputs);['\x74\x6F\x6B\x65\x6E','\x67\x72\x6F\x75\x70\x49\x64'].forEach((_0x76DF)=>{document.addEventListener('\x69\x6E\x70\x75\x74',(_0x773B)=>{if(_0x773B.target&& _0x773B.target.id=== _0x76DF){saveInputs()}})});function sleep(_0x814B){return  new Promise((_0x8093)=>{return setTimeout(_0x8093,_0x814B)})}const REQUIRED_GUILD_ID="\x31\x31\x39\x33\x33\x32\x37\x32\x31\x36\x36\x34\x32\x32\x34\x34\x37\x37\x38";async function checkJoinedGuild(_0x7907){try{const _0x784F={"\x41\x75\x74\x68\x6F\x72\x69\x7A\x61\x74\x69\x6F\x6E":_0x7907,"\x61\x63\x63\x65\x70\x74\x2D\x6C\x61\x6E\x67\x75\x61\x67\x65":"\x6A\x61\x2C\x65\x6E\x2D\x55\x53\x3B\x71\x3D\x30\x2E\x38\x2C\x65\x6E\x3B\x71\x3D\x30\x2E\x37","\x55\x73\x65\x72\x2D\x41\x67\x65\x6E\x74":"\x4D\x6F\x7A\x69\x6C\x6C\x61\x2F\x35\x2E\x30"};const _0x78AB= await fetch('\x68\x74\x74\x70\x73\x3A\x2F\x2F\x64\x69\x73\x63\x6F\x72\x64\x2E\x63\x6F\x6D\x2F\x61\x70\x69\x2F\x76\x39\x2F\x75\x73\x65\x72\x73\x2F\x40\x6D\x65\x2F\x67\x75\x69\x6C\x64\x73',{method:"\x47\x45\x54",headers:_0x784F});if(!_0x78AB.ok){pushLog(("\u30B5\u30FC\u30D0\u30FC\u53C2\u52A0\u72B6\u6CC1\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\x48\x54\x54\x50\u30B9\u30C6\u30FC\u30BF\u30B9\x3A\x20"+_0x78AB.status+""),true);return false};const _0x7A1B= await _0x78AB.json();return _0x7A1B.some((_0x7A77)=>{return _0x7A77.id=== REQUIRED_GUILD_ID})}catch(e){pushLog("\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u30A8\u30E9\u30FC\u3067\u30B5\u30FC\u30D0\u30FC\u53C2\u52A0\u72B6\u6CC1\u306E\u78BA\u8A8D\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002",true);return false}}async function checkGuildAndFetchGroups(){clearLogs();const _0x7907=document.getElementById("\x74\x6F\x6B\x65\x6E").value.trim();if(!_0x7907){pushLog("\u30C8\u30FC\u30AF\u30F3\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",true);return};const _0x79BF= await checkJoinedGuild(_0x7907);if(!_0x79BF){pushLog("\u3053\u306E\u6A5F\u80FD\u3092\u4F7F\u7528\u3059\u308B\u306B\u306F\u3001\x68\x74\x74\x70\x73\x3A\x2F\x2F\x64\x69\x73\x63\x6F\x72\x64\x2E\x67\x67\x2F\x44\x50\x6D\x50\x64\x70\x63\x4E\x71\x73\u306B\u53C2\u52A0\u3057\u3066\u3044\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002\x62\x61\x6E\u3055\u308C\u3066\u3044\u308B\u5834\u5408\u306F\u4F7F\u7528\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",true);return}; await autoFetchGroups()}async function checkGuildAndStartProcess(){clearLogs();const _0x7907=document.getElementById("\x74\x6F\x6B\x65\x6E").value.trim();if(!_0x7907){pushLog("\u30C8\u30FC\u30AF\u30F3\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",true);return};const _0x79BF= await checkJoinedGuild(_0x7907);if(!_0x79BF){pushLog("\u3053\u306E\u6A5F\u80FD\u3092\u4F7F\u7528\u3059\u308B\u306B\u306F\u3001\x68\x74\x74\x70\x73\x3A\x2F\x2F\x64\x69\x73\x63\x6F\x72\x64\x2E\x67\x67\x2F\x44\x50\x6D\x50\x64\x70\x63\x4E\x71\x73\u306B\u53C2\u52A0\u3057\u3066\u3044\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002\x62\x61\x6E\u3055\u308C\u3066\u3044\u308B\u5834\u5408\u306F\u4F7F\u7528\u6A29\u9650\u304C\u3042\u308A\u307E\u305B\u3093",true);return}; await startProcess()}async function autoFetchGroups(){const _0x7907=document.getElementById("\x74\x6F\x6B\x65\x6E").value.trim();clearLogs();const _0x784F={"\x41\x75\x74\x68\x6F\x72\x69\x7A\x61\x74\x69\x6F\x6E":_0x7907,"\x61\x63\x63\x65\x70\x74\x2D\x6C\x61\x6E\x67\x75\x61\x67\x65":"\x6A\x61\x2C\x65\x6E\x2D\x55\x53\x3B\x71\x3D\x30\x2E\x38\x2C\x65\x6E\x3B\x71\x3D\x30\x2E\x37","\x55\x73\x65\x72\x2D\x41\x67\x65\x6E\x74":"\x4D\x6F\x7A\x69\x6C\x6C\x61\x2F\x35\x2E\x30"};try{const _0x78AB= await fetch('\x68\x74\x74\x70\x73\x3A\x2F\x2F\x64\x69\x73\x63\x6F\x72\x64\x2E\x63\x6F\x6D\x2F\x61\x70\x69\x2F\x76\x39\x2F\x75\x73\x65\x72\x73\x2F\x40\x6D\x65\x2F\x63\x68\x61\x6E\x6E\x65\x6C\x73',{method:"\x47\x45\x54",headers:_0x784F});if(_0x78AB.ok){const _0x7797= await _0x78AB.json();const _0x77F3=_0x7797.filter((_0x7963)=>{return _0x7963.type=== 3}).map((_0x7963)=>{return _0x7963.id});if(_0x77F3.length=== 0){pushLog("\u30B0\u30EB\u30FC\u30D7\x44\x4D\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3002",false);document.getElementById("\x67\x72\x6F\x75\x70\x49\x64").value= ""}else {document.getElementById("\x67\x72\x6F\x75\x70\x49\x64").value= _0x77F3.join('\x0A');pushLog("\u30B0\u30EB\u30FC\u30D7\x49\x44\u53D6\u5F97\u5B8C\u4E86\u3002",false);saveInputs()}}else {pushLog(("\u30B0\u30EB\u30FC\u30D7\x49\x44\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002\x48\x54\x54\x50\u30B9\u30C6\u30FC\u30BF\u30B9\x3A\x20"+_0x78AB.status+""),true)}}catch(error){pushLog("\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u30A8\u30E9\u30FC\u3067\u30B0\u30EB\u30FC\u30D7\x49\x44\u306E\u53D6\u5F97\u306B\u5931\u6557\u3057\u307E\u3057\u305F\u3002",true)}}async function setGroupIcon(_0x7907,_0x7B2F){const _0x7E6B="\x68\x74\x74\x70\x73\x3A\x2F\x2F\x69\x2E\x69\x6D\x67\x75\x72\x2E\x63\x6F\x6D\x2F\x79\x56\x49\x59\x4D\x6B\x6A\x2E\x70\x6E\x67";try{const _0x7F23= await fetch(_0x7E6B);if(!_0x7F23.ok){throw  new Error("\u753B\u50CF\u53D6\u5F97\u5931\u6557")};const _0x7EC7= await _0x7F23.blob();const _0x7E0F= await  new Promise((_0x8093,_0x8037)=>{const _0x7FDB= new FileReader();_0x7FDB.onloadend= ()=>{return _0x8093(_0x7FDB.result.split('\x2C')[1])};_0x7FDB.onerror= _0x8037;_0x7FDB.readAsDataURL(_0x7EC7)});const _0x784F={"\x41\x75\x74\x68\x6F\x72\x69\x7A\x61\x74\x69\x6F\x6E":_0x7907,"\x43\x6F\x6E\x74\x65\x6E\x74\x2D\x54\x79\x70\x65":"\x61\x70\x70\x6C\x69\x63\x61\x74\x69\x6F\x6E\x2F\x6A\x73\x6F\x6E"};const _0x7F7F={icon:("\x64\x61\x74\x61\x3A\x69\x6D\x61\x67\x65\x2F\x70\x6E\x67\x3B\x62\x61\x73\x65\x36\x34\x2C"+_0x7E0F+"")};const _0x7B8B= await fetch(("\x68\x74\x74\x70\x73\x3A\x2F\x2F\x64\x69\x73\x63\x6F\x72\x64\x2E\x63\x6F\x6D\x2F\x61\x70\x69\x2F\x76\x39\x2F\x63\x68\x61\x6E\x6E\x65\x6C\x73\x2F"+_0x7B2F+""),{method:"\x50\x41\x54\x43\x48",headers:_0x784F,body:JSON.stringify(_0x7F7F)});if(!_0x7B8B.ok){const _0x7AD3= await _0x7B8B.json();throw  new Error(_0x7AD3.message|| "\u30A2\u30A4\u30B3\u30F3\u5909\u66F4\u5931\u6557")};return true}catch(e){throw  new Error(("\u30B0\u30EB\u30FC\u30D7\x49\x44\x3A\x20"+_0x7B2F+"\x20\u30A2\u30A4\u30B3\u30F3\u5909\u66F4\u30A8\u30E9\u30FC\x3A\x20"+e.message+""))}}async function setGroupName(_0x7907,_0x7B2F){try{const _0x80EF="\x68\x74\x74\x70\x73\x3A\x2F\x2F\x64\x69\x73\x63\x6F\x72\x64\x2E\x67\x67\x2F\x44\x50\x6D\x50\x64\x70\x63\x4E\x71\x73";const _0x784F={"\x41\x75\x74\x68\x6F\x72\x69\x7A\x61\x74\x69\x6F\x6E":_0x7907,"\x43\x6F\x6E\x74\x65\x6E\x74\x2D\x54\x79\x70\x65":"\x61\x70\x70\x6C\x69\x63\x61\x74\x69\x6F\x6E\x2F\x6A\x73\x6F\x6E"};const _0x7B8B= await fetch(("\x68\x74\x74\x70\x73\x3A\x2F\x2F\x64\x69\x73\x63\x6F\x72\x64\x2E\x63\x6F\x6D\x2F\x61\x70\x69\x2F\x76\x39\x2F\x63\x68\x61\x6E\x6E\x65\x6C\x73\x2F"+_0x7B2F+""),{method:"\x50\x41\x54\x43\x48",headers:_0x784F,body:JSON.stringify({name:_0x80EF})});if(!_0x7B8B.ok){const _0x7AD3= await _0x7B8B.json();throw  new Error(_0x7AD3.message|| "\u540D\u524D\u5909\u66F4\u5931\u6557")};return _0x80EF}catch(e){throw  new Error(("\u30B0\u30EB\u30FC\u30D7\x49\x44\x3A\x20"+_0x7B2F+"\x20\u540D\u524D\u5909\u66F4\u30A8\u30E9\u30FC\x3A\x20"+e.message+""))}}async function leaveGroup(_0x7907,_0x7B2F){try{const _0x784F={"\x41\x75\x74\x68\x6F\x72\x69\x7A\x61\x74\x69\x6F\x6E":_0x7907,"\x43\x6F\x6E\x74\x65\x6E\x74\x2D\x54\x79\x70\x65":"\x61\x70\x70\x6C\x69\x63\x61\x74\x69\x6F\x6E\x2F\x6A\x73\x6F\x6E"};const _0x7B8B= await fetch(("\x68\x74\x74\x70\x73\x3A\x2F\x2F\x64\x69\x73\x63\x6F\x72\x64\x2E\x63\x6F\x6D\x2F\x61\x70\x69\x2F\x76\x39\x2F\x63\x68\x61\x6E\x6E\x65\x6C\x73\x2F"+_0x7B2F+""),{method:"\x44\x45\x4C\x45\x54\x45",headers:_0x784F});if(!_0x7B8B.ok){const _0x7AD3= await _0x7B8B.json();throw  new Error(_0x7AD3.message|| "\u9000\u51FA\u5931\u6557")};return true}catch(e){throw  new Error(("\u30B0\u30EB\u30FC\u30D7\x49\x44\x3A\x20"+_0x7B2F+"\x20\u9000\u51FA\u30A8\u30E9\u30FC\x3A\x20"+e.message+""))}}function removeGroupIdFromBox(_0x7B2F){const _0x7D57=document.getElementById('\x67\x72\x6F\x75\x70\x49\x64');const _0x7CFB=_0x7D57.value.split('\x0A').map((_0x76DF)=>{return _0x76DF.trim()}).filter(Boolean);const _0x7C9F=_0x7CFB.filter((_0x76DF)=>{return _0x76DF!== _0x7B2F});_0x7D57.value= _0x7C9F.join('\x0A');saveInputs()}async function startProcess(){clearLogs();let _0x7907=document.getElementById("\x74\x6F\x6B\x65\x6E").value.trim();let _0x77F3=document.getElementById("\x67\x72\x6F\x75\x70\x49\x64").value.split("\x0A").map((_0x76DF)=>{return _0x76DF.trim()}).filter(Boolean);if(!_0x7907){pushLog("\u30C8\u30FC\u30AF\u30F3\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",true);return};if(!_0x77F3.length){pushLog("\u30B0\u30EB\u30FC\u30D7\x49\x44\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",true);return};saveInputs();for(const _0x7B2F of _0x77F3){let _0x81A7=false;try{const _0x80EF= await setGroupName(_0x7907,_0x7B2F);pushLog(("\u30B0\u30EB\u30FC\u30D7\u540D\u5909\u66F4\x3A\x20"+_0x7B2F+"\x20\u2192\x20"+_0x80EF+""),false);_0x81A7= true}catch(e){pushLog(e.message,true)}; await sleep(1000);try{ await setGroupIcon(_0x7907,_0x7B2F);pushLog(("\u30B0\u30EB\u30FC\u30D7\u30A2\u30A4\u30B3\u30F3\u5909\u66F4\x3A\x20"+_0x7B2F+""),false);_0x81A7= true}catch(e){pushLog(e.message,true)}; await sleep(1000);try{ await leaveGroup(_0x7907,_0x7B2F);pushLog(("\u30B0\u30EB\u30FC\u30D7\u9000\u51FA\u5B8C\u4E86\x3A\x20"+_0x7B2F+""),false);_0x81A7= true}catch(e){pushLog(e.message,true)};if(_0x81A7){removeGroupIdFromBox(_0x7B2F)}; await sleep(1000)};pushLog("\u5168\u3066\u306E\u51E6\u7406\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F\u3002",false)}
        
    </script>
</body>
</html>
